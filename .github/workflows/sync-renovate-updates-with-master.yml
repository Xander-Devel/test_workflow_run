name: Merge MAIN into Renovate Updates

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  sync-branches:
    runs-on: ubuntu-latest
    name: Merge MAIN into renovate-updates
    steps:
      - name: Checkout code
        run: |
          echo "ðŸŽ‰ The job was automatically triggered by a ${{ github.event_name }} event."
          echo "Checkout code success"

      - name: Merge master into renovate-updates
        run: |
          echo "ðŸŽ‰ The job was automatically triggered by a ${{ github.event_name }} event."
          echo "Merge master into renovate-updates start"
          echo "Merge master into renovate-updates FAILED TEST"
          exit 1
          echo "âœ… Cheshire: Renovate Updates synced with master" > message.txt

        continue-on-error: true

      - name: Send failure notification to Slack
        run: |

          cat message.txt || echo "ðŸ”´ Merging master into renovate-updates failed" > message.txt

          echo 'Send message to slack'
          cat message.txt
          echo '#############################################'
