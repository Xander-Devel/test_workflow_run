name: Merge MAIN into Renovate Updates

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  sync-branches:
    runs-on: ubuntu-latest
    name: Merge MAIN into renovate-updates
    steps:
      - name: Checkout code
        run: |
          echo "ðŸŽ‰ The job was automatically triggered by a ${{ github.event_name }} event."
          echo "Checkout code success"

      - name: Merge master into renovate-updates
        id: merge_master_step
        run: |
          echo "ðŸŽ‰ The job was automatically triggered by a ${{ github.event_name }} event."
          echo "Merge master into renovate-updates start"
          echo "Merge master into renovate-updates FAILED TEST"
          exit 1
          echo "âœ… Cheshire: Renovate Updates synced with master" > message.txt

      - name: Send failure notification to Slack
        if: success() || failure()
        run: |

          cat message.txt || echo "ðŸ”´ Merging master into renovate-updates failed" > message.txt

          echo 'Send message to slack'
          cat message.txt
          echo ${{ steps.merge_master_step.conclusion }}
          
          if [ ${{ steps.merge_master_step.conclusion }} == 'failure' ]
          then
            echo "failed -d-d-d-d-d-d-"
          fi
          
          
